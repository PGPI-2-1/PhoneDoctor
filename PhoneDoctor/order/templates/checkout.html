{% extends 'core/base.html' %}
{% block title %}Checkout{% endblock %}

{% block content %}
    <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
        <div class="felx felx-col justify-between block mt-2 p-4 bg-white rounded-xl">
            <h2 class="text-2xl text-center font-bold mb-8">Resumen de la Orden</h2>
            {% for cart_item in cart_items %}
                <div class="flex justify-between mb-4">
                    <p>{{ cart_item.quantity }} x {{ cart_item.product.name }}</p>
                    <p>{{ cart_item.quantity }} x {{ cart_item.product.price }} €</p>
                </div>
            {% endfor %}
            <p class="text-right font-bold border-t py-2">Total: {{ precio_total }} €</p>
        </div>
    </div>

    <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
        <h2 class="text-2xl text-center font-bold mb-4 border-b">Datos de entrega</h2>
        {% if user.is_authenticated %}
            <form class="mt-4" method="post" action="{% url 'checkout' %}">
                {% csrf_token %}
                <div class="mb-4 felx felx-col justify-between block mt-2 p-4 bg-white rounded-xl" >
                    <label for="address" class="block text-sm font-medium text-gray-700">Dirección de entrega:</label>
                    <input type="text" name="address" id="address" placeholder="Ingresa tu dirección" required
                        class="mt-1 p-2 w-full border rounded-md">
                </div>
                <!-- Puedes agregar más campos según sea necesario -->

                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Pagar</button>
            </form>
        {% else %}
            <form class="mt-4" method="post" action="{% url 'checkout' %}">
                {% csrf_token %}
                <div class="mb-4 felx felx-col justify-between block mt-2 p-4 bg-white rounded-xl" >
                    <label for="address" class="block text-sm font-medium text-gray-700">Dirección de entrega:</label>
                    <input type="text" name="address" id="address" placeholder="Ingresa tu dirección" required
                        class="mt-1 p-2 w-full border rounded-md">
                </div>
                <div class="mb-4 felx felx-col justify-between block mt-2 p-4 bg-white rounded-xl" >
                    <label for="email" class="block text-sm font-medium text-gray-700">Correo electrínico</label>
                    <input type="text" name="email" id="email" placeholder="Ingresa tu correo electrónico" required
                        class="mt-1 p-2 w-full border rounded-md">
                </div>

                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Pagar</button>
            </form>
        {% endif %}
        
    </div>
{% endblock %}
